<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded from Scratch: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded from Scratch
   &#160;<span id="projectnumber">Project</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('radar_2src_2main_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">radar/src/main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>main program for "model radar" user application.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &quot;<a class="el" href="userutil_8h_source.html">userutil.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="usyscall_8h_source.html">usyscall.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for radar/src/main.c:</div>
<div class="dyncontent">
<div class="center"><img src="radar_2src_2main_8c__incl.png" border="0" usemap="#amain_8c" alt=""/></div>
<map name="amain_8c" id="amain_8c">
<area shape="rect" title="main program for &quot;model radar&quot; user application." alt="" coords="245,5,312,32"/>
<area shape="rect" title=" " alt="" coords="5,80,72,107"/>
<area shape="rect" title=" " alt="" coords="97,80,167,107"/>
<area shape="rect" title=" " alt="" coords="303,155,377,181"/>
<area shape="rect" title=" " alt="" coords="243,80,314,107"/>
<area shape="rect" title=" " alt="" coords="338,80,409,107"/>
<area shape="rect" href="userutil_8h.html" title="Macros and wrapper functions to expose general helpful user&#45;space utility." alt="" coords="433,80,516,107"/>
<area shape="rect" href="usyscall_8h.html" title=" " alt="" coords="541,80,627,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnon__polled__system__locks.html">non_polled_system_locks</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad9f6b9774c495d1125caab82b36d4361"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ad9f6b9774c495d1125caab82b36d4361">NUM_RING_LEDS</a>&#160;&#160;&#160;24</td></tr>
<tr class="memdesc:ad9f6b9774c495d1125caab82b36d4361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of LEDs composing the ring around the radar (determines fidelity of indicators)  <a href="radar_2src_2main_8c.html#ad9f6b9774c495d1125caab82b36d4361">More...</a><br /></td></tr>
<tr class="separator:ad9f6b9774c495d1125caab82b36d4361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77edf156f9dad10b07ffcb440cc48a29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a77edf156f9dad10b07ffcb440cc48a29">DEGREES_PER_LED</a>&#160;&#160;&#160;(360 / <a class="el" href="radar_2src_2main_8c.html#ad9f6b9774c495d1125caab82b36d4361">NUM_RING_LEDS</a>)</td></tr>
<tr class="memdesc:a77edf156f9dad10b07ffcb440cc48a29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of degrees allocated to each LED (higher number of LEDs indicates that more information can be given per degree instead of batched)  <a href="radar_2src_2main_8c.html#a77edf156f9dad10b07ffcb440cc48a29">More...</a><br /></td></tr>
<tr class="separator:a77edf156f9dad10b07ffcb440cc48a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ae212bf8be93de1ef8a39f7a4c0fec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a65ae212bf8be93de1ef8a39f7a4c0fec">STEP_RATIO</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:a65ae212bf8be93de1ef8a39f7a4c0fec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lowest number of steps corresponding to a whole number of degrees (ratio is 256 steps to 45 degrees for the accumulator)  <a href="radar_2src_2main_8c.html#a65ae212bf8be93de1ef8a39f7a4c0fec">More...</a><br /></td></tr>
<tr class="separator:a65ae212bf8be93de1ef8a39f7a4c0fec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e06117ff31e633ea333edac433a90e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a43e06117ff31e633ea333edac433a90e">DEGREE_RATIO</a>&#160;&#160;&#160;45</td></tr>
<tr class="memdesc:a43e06117ff31e633ea333edac433a90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of degrees corresponding to lowest whole number of steps (ratio is 256 steps to 45 degrees when steps per revolution is 2048)  <a href="radar_2src_2main_8c.html#a43e06117ff31e633ea333edac433a90e">More...</a><br /></td></tr>
<tr class="separator:a43e06117ff31e633ea333edac433a90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf5b4949b2bcaa055cc03fa33274f6d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#acf5b4949b2bcaa055cc03fa33274f6d9">COMMAND_BUFFER_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:acf5b4949b2bcaa055cc03fa33274f6d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of characters that the command buffer can store (should be well more than any needed command)  <a href="radar_2src_2main_8c.html#acf5b4949b2bcaa055cc03fa33274f6d9">More...</a><br /></td></tr>
<tr class="separator:acf5b4949b2bcaa055cc03fa33274f6d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea4062436383ba9abd1ad9cc3314a80"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a7ea4062436383ba9abd1ad9cc3314a80">DEFAULT_SPEED_RPM</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a7ea4062436383ba9abd1ad9cc3314a80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default speed of the radar revolutions in RPM.  <a href="radar_2src_2main_8c.html#a7ea4062436383ba9abd1ad9cc3314a80">More...</a><br /></td></tr>
<tr class="separator:a7ea4062436383ba9abd1ad9cc3314a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e12a450642ee1677d4c2584df3b63d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a75e12a450642ee1677d4c2584df3b63d">MAXIMUM_SPEED_RPM</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a75e12a450642ee1677d4c2584df3b63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum radar speed in RPM.  <a href="radar_2src_2main_8c.html#a75e12a450642ee1677d4c2584df3b63d">More...</a><br /></td></tr>
<tr class="separator:a75e12a450642ee1677d4c2584df3b63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2637986551199bdefd69a97fe9a4f475"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a2637986551199bdefd69a97fe9a4f475">MINIMUM_SPEED_RPM</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a2637986551199bdefd69a97fe9a4f475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum radar speed in RPM.  <a href="radar_2src_2main_8c.html#a2637986551199bdefd69a97fe9a4f475">More...</a><br /></td></tr>
<tr class="separator:a2637986551199bdefd69a97fe9a4f475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d5d033af9c5899f6b30dbe884822f1f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a8d5d033af9c5899f6b30dbe884822f1f">DEFAULT_RANGE_CM</a>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:a8d5d033af9c5899f6b30dbe884822f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default range of the sensor in cm.  <a href="radar_2src_2main_8c.html#a8d5d033af9c5899f6b30dbe884822f1f">More...</a><br /></td></tr>
<tr class="separator:a8d5d033af9c5899f6b30dbe884822f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc3bb56b74cb99153e2d009cb8261ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#afcc3bb56b74cb99153e2d009cb8261ab">MAXIMUM_RANGE_CM</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:afcc3bb56b74cb99153e2d009cb8261ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum radar speed in RPM.  <a href="radar_2src_2main_8c.html#afcc3bb56b74cb99153e2d009cb8261ab">More...</a><br /></td></tr>
<tr class="separator:afcc3bb56b74cb99153e2d009cb8261ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7628d44c66bc89df8dfdcec4ebc673c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ad7628d44c66bc89df8dfdcec4ebc673c">MINIMUM_RANGE_CM</a>&#160;&#160;&#160;30</td></tr>
<tr class="memdesc:ad7628d44c66bc89df8dfdcec4ebc673c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum radar speed in RPM.  <a href="radar_2src_2main_8c.html#ad7628d44c66bc89df8dfdcec4ebc673c">More...</a><br /></td></tr>
<tr class="separator:ad7628d44c66bc89df8dfdcec4ebc673c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf824566d577c7c8088aa454c831f906"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#adf824566d577c7c8088aa454c831f906">display_commands</a> ()</td></tr>
<tr class="separator:adf824566d577c7c8088aa454c831f906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a675edf93024f994b38cec03377305150"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a675edf93024f994b38cec03377305150">handle_user_command</a> (char *cmd)</td></tr>
<tr class="separator:a675edf93024f994b38cec03377305150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39b37bb3a614e6e2497b7edf0bf3445"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ad39b37bb3a614e6e2497b7edf0bf3445">process_user_input</a> ()</td></tr>
<tr class="separator:ad39b37bb3a614e6e2497b7edf0bf3445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3d1091e8e17af1ba455be797bd50f0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ab3d1091e8e17af1ba455be797bd50f0c">user_thread</a> (<a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> void *arg)</td></tr>
<tr class="separator:ab3d1091e8e17af1ba455be797bd50f0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76df78f4d9e4d2be384c385dd3fbc2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ae76df78f4d9e4d2be384c385dd3fbc2f">stepper_thread</a> (<a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> void *arg)</td></tr>
<tr class="separator:ae76df78f4d9e4d2be384c385dd3fbc2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0764b50d3a9cda3face40765b3206a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#ae0764b50d3a9cda3face40765b3206a2">sensor_thread</a> (void *arg)</td></tr>
<tr class="separator:ae0764b50d3a9cda3face40765b3206a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a538307d8e2aed0196e99fc7a1faa5c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a538307d8e2aed0196e99fc7a1faa5c39">indicator_thread</a> (void *arg)</td></tr>
<tr class="separator:a538307d8e2aed0196e99fc7a1faa5c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e00f969540321fe94cde2e38a8a8eec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="radar_2src_2main_8c.html#a7e00f969540321fe94cde2e38a8a8eec">main</a> (<a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int argc, <a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> char *argv[])</td></tr>
<tr class="separator:a7e00f969540321fe94cde2e38a8a8eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>main program for "model radar" user application. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="acf5b4949b2bcaa055cc03fa33274f6d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf5b4949b2bcaa055cc03fa33274f6d9">&#9670;&nbsp;</a></span>COMMAND_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COMMAND_BUFFER_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of characters that the command buffer can store (should be well more than any needed command) </p>

</div>
</div>
<a id="a8d5d033af9c5899f6b30dbe884822f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d5d033af9c5899f6b30dbe884822f1f">&#9670;&nbsp;</a></span>DEFAULT_RANGE_CM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_RANGE_CM&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default range of the sensor in cm. </p>

</div>
</div>
<a id="a7ea4062436383ba9abd1ad9cc3314a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ea4062436383ba9abd1ad9cc3314a80">&#9670;&nbsp;</a></span>DEFAULT_SPEED_RPM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_SPEED_RPM&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default speed of the radar revolutions in RPM. </p>

</div>
</div>
<a id="a43e06117ff31e633ea333edac433a90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e06117ff31e633ea333edac433a90e">&#9670;&nbsp;</a></span>DEGREE_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEGREE_RATIO&#160;&#160;&#160;45</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of degrees corresponding to lowest whole number of steps (ratio is 256 steps to 45 degrees when steps per revolution is 2048) </p>

</div>
</div>
<a id="a77edf156f9dad10b07ffcb440cc48a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77edf156f9dad10b07ffcb440cc48a29">&#9670;&nbsp;</a></span>DEGREES_PER_LED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEGREES_PER_LED&#160;&#160;&#160;(360 / <a class="el" href="radar_2src_2main_8c.html#ad9f6b9774c495d1125caab82b36d4361">NUM_RING_LEDS</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of degrees allocated to each LED (higher number of LEDs indicates that more information can be given per degree instead of batched) </p>

</div>
</div>
<a id="afcc3bb56b74cb99153e2d009cb8261ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcc3bb56b74cb99153e2d009cb8261ab">&#9670;&nbsp;</a></span>MAXIMUM_RANGE_CM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXIMUM_RANGE_CM&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum radar speed in RPM. </p>

</div>
</div>
<a id="a75e12a450642ee1677d4c2584df3b63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75e12a450642ee1677d4c2584df3b63d">&#9670;&nbsp;</a></span>MAXIMUM_SPEED_RPM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXIMUM_SPEED_RPM&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum radar speed in RPM. </p>

</div>
</div>
<a id="ad7628d44c66bc89df8dfdcec4ebc673c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7628d44c66bc89df8dfdcec4ebc673c">&#9670;&nbsp;</a></span>MINIMUM_RANGE_CM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINIMUM_RANGE_CM&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum radar speed in RPM. </p>

</div>
</div>
<a id="a2637986551199bdefd69a97fe9a4f475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2637986551199bdefd69a97fe9a4f475">&#9670;&nbsp;</a></span>MINIMUM_SPEED_RPM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINIMUM_SPEED_RPM&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum radar speed in RPM. </p>

</div>
</div>
<a id="ad9f6b9774c495d1125caab82b36d4361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9f6b9774c495d1125caab82b36d4361">&#9670;&nbsp;</a></span>NUM_RING_LEDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_RING_LEDS&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of LEDs composing the ring around the radar (determines fidelity of indicators) </p>

</div>
</div>
<a id="a65ae212bf8be93de1ef8a39f7a4c0fec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65ae212bf8be93de1ef8a39f7a4c0fec">&#9670;&nbsp;</a></span>STEP_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STEP_RATIO&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lowest number of steps corresponding to a whole number of degrees (ratio is 256 steps to 45 degrees for the accumulator) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adf824566d577c7c8088aa454c831f906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf824566d577c7c8088aa454c831f906">&#9670;&nbsp;</a></span>display_commands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_commands </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prints the supported commands. Invoked whenever the user applications begins or the 'help' command is typed </p>

</div>
</div>
<a id="a675edf93024f994b38cec03377305150"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a675edf93024f994b38cec03377305150">&#9670;&nbsp;</a></span>handle_user_command()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_user_command </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called after a carriage return character has been found in the user input. Compares the lowercase version of the command to the string representations of the supported command and performs necessary actions for each command (mainly updating global variables). For commands that specify a field, the command and arguement are parsed separately and then acted upon (right now only expecting a single arguement at most). </p>

</div>
</div>
<a id="a538307d8e2aed0196e99fc7a1faa5c39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a538307d8e2aed0196e99fc7a1faa5c39">&#9670;&nbsp;</a></span>indicator_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void indicator_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This thread is responsible for showing indications that a "radar" (ultrasonic) detection has been made at the current angle. The ring LED will be activated to show that the current angle has an object closer than the defined threshold. Reads from the last measurement are protected by the measurement lock (synchronizing with the sensor thread). </p>

</div>
</div>
<a id="a7e00f969540321fe94cde2e38a8a8eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e00f969540321fe94cde2e38a8a8eec">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Main function for starting the user, stepper, indicator, and sensor threads. Follows convention of creating timing constraints for tasks, defining threads, initializing mutexes, and starting the multitasking sequence. </p>

</div>
</div>
<a id="ad39b37bb3a614e6e2497b7edf0bf3445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad39b37bb3a614e6e2497b7edf0bf3445">&#9670;&nbsp;</a></span>process_user_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void process_user_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Process any user input until the command_buffer no longer contains a carriage return character. Continuously searches the new input for a carriage return and handles a user command each time a carriage return is seen. Moves any remaining characters to the beginning of the buffer after no more carriage returns are found in the processed input. </p>

</div>
</div>
<a id="ae0764b50d3a9cda3face40765b3206a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0764b50d3a9cda3face40765b3206a2">&#9670;&nbsp;</a></span>sensor_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sensor_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This thread is responsible for taking sensor measurements and updating the range of the <code>current_range</code> global variable. Only this thread is responsible for updating the value of the last_ultrasonic_measurement variable (although other threads are allowed to reference it). Both the sensor thread and indicator thread can be reliably profiled (instead of polling model), so updates to the measurement are made under a mutex. </p>

</div>
</div>
<a id="ae76df78f4d9e4d2be384c385dd3fbc2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae76df78f4d9e4d2be384c385dd3fbc2f">&#9670;&nbsp;</a></span>stepper_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stepper_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This thread is responsible for maintaining a consistent motion for the stepper motor. This thread also follows the polling model since speed is configurable (do not want to user kernel-level timer and period to control movement - would have been possible to just rely on periodic nature without timer but this couples kernel functionality to closely to the periodic task). Also updates the current value of the angle global variable for other tasks to accurately assess where the measurement is originating. This current implementation is blocking for the stepper_move command to better profile the execution time of kernel_level interrupts. </p>
<p>Current sweep direction (1 for forward 0 to 180 and 0 for backward 180 to 0 - set when radar is active and the arched sweep in occurring)</p>

</div>
</div>
<a id="ab3d1091e8e17af1ba455be797bd50f0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3d1091e8e17af1ba455be797bd50f0c">&#9670;&nbsp;</a></span>user_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void user_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="userutil_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a> void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This thread is responsible for monitoring for user input and processing actions as they come in. It follows a polling model rather than have a bounded worst case execution period / computation time (since user input is a sporadic event). The overall control of the application is dictated by this thread. Other threads merely maintain the last state configured by commands received by this thread. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d422163b96683743ed3963d4aac17747.html">app</a></li><li class="navelem"><a class="el" href="dir_aaeb9409f74ee9d13454808c8d47cca7.html">radar</a></li><li class="navelem"><a class="el" href="dir_743751268fcd6d48658fcd1d39c67745.html">src</a></li><li class="navelem"><a class="el" href="radar_2src_2main_8c.html">main.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
