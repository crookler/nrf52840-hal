<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded from Scratch: systick.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded from Scratch
   &#160;<span id="projectnumber">Project</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('systick_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">systick.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of generic SysTick counter configuration.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="systick_8h_source.html">systick.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="printk_8h_source.html">printk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="multitask_8h_source.html">multitask.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for systick.c:</div>
<div class="dyncontent">
<div class="center"><img src="systick_8c__incl.png" border="0" usemap="#asystick_8c" alt=""/></div>
<map name="asystick_8c" id="asystick_8c">
<area shape="rect" title="Implementation of generic SysTick counter configuration." alt="" coords="87,5,166,32"/>
<area shape="rect" href="systick_8h.html" title="Address locations and types for working with the SysTick timer." alt="" coords="5,229,85,256"/>
<area shape="rect" href="error_8h.html" title="Constants for unified error codes across all peripherals. Each error code specifies exactly one uniqu..." alt="" coords="49,80,113,107"/>
<area shape="rect" href="printk_8h.html" title="Prototypes for printk (print to debugger as a wrapper of rtt.h)" alt="" coords="137,80,209,107"/>
<area shape="rect" href="multitask_8h.html" title="Stores syscall function prototypes and kernel level structs for managing inter&#45;process states." alt="" coords="233,80,329,107"/>
<area shape="rect" href="arm_8h.html" title="Macro definitions, typedefs, and aliases for common ARM functionality." alt="" coords="217,304,277,331"/>
<area shape="rect" href="rtt_8h.html" title="Function prototpyes and struct definitions for writing/reading to the up and down buffer of the debug..." alt="" coords="126,229,175,256"/>
<area shape="rect" href="thread_8h.html" title="Common ethread structs and constants needed according source files aiding with mulititasking." alt="" coords="365,229,441,256"/>
<area shape="rect" href="mpu_8h.html" title="MMIO addresses and common enums/structs for working with the memory protection unit." alt="" coords="175,155,238,181"/>
<area shape="rect" href="mutex_8h.html" title="Provides stubs and data structures for implementing mutual exclusion." alt="" coords="314,155,390,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2f2981768d84c662c8875454702fcdf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#a2f2981768d84c662c8875454702fcdf1">systick_configure</a> (<a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> reload, <a class="el" href="systick_8h.html#a7aee8bf1e1c7e2c2d83acbafef1a5a11">systick_clksource</a> clksource, <a class="el" href="systick_8h.html#afe37f42a8e14b7ae5d74367612c4a15e">systick_tickint</a> tickint)</td></tr>
<tr class="separator:a2f2981768d84c662c8875454702fcdf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a475a16abcc21caa11e52539be4a70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#a23a475a16abcc21caa11e52539be4a70">systick_disable</a> ()</td></tr>
<tr class="separator:a23a475a16abcc21caa11e52539be4a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ceb4ff889b36c96361ac5955a8ef491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#a7ceb4ff889b36c96361ac5955a8ef491">systick_delay</a> (<a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> ms)</td></tr>
<tr class="separator:a7ceb4ff889b36c96361ac5955a8ef491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafb8d3e0fd06464b1ee0ae1edbc3c7d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#aafb8d3e0fd06464b1ee0ae1edbc3c7d6">SysTick_Handler</a> ()</td></tr>
<tr class="separator:aafb8d3e0fd06464b1ee0ae1edbc3c7d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa1f72e8ab2ecd43977ec5897dae37081"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#aa1f72e8ab2ecd43977ec5897dae37081">timer_wrap_around</a></td></tr>
<tr class="memdesc:aa1f72e8ab2ecd43977ec5897dae37081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of times that the timer has counted from the reset value down to 0.  <a href="systick_8c.html#aa1f72e8ab2ecd43977ec5897dae37081">More...</a><br /></td></tr>
<tr class="separator:aa1f72e8ab2ecd43977ec5897dae37081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59d2573d1051d504479d8861c94e8e8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="systick_8c.html#a59d2573d1051d504479d8861c94e8e8d">timer_wrap_comparison</a></td></tr>
<tr class="memdesc:a59d2573d1051d504479d8861c94e8e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of times that the timer needs to wrap before it can do its main functionality.  <a href="systick_8c.html#a59d2573d1051d504479d8861c94e8e8d">More...</a><br /></td></tr>
<tr class="separator:a59d2573d1051d504479d8861c94e8e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of generic SysTick counter configuration. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2f2981768d84c662c8875454702fcdf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2981768d84c662c8875454702fcdf1">&#9670;&nbsp;</a></span>systick_configure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int systick_configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>reload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="systick_8h.html#a7aee8bf1e1c7e2c2d83acbafef1a5a11">systick_clksource</a>&#160;</td>
          <td class="paramname"><em>clksource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="systick_8h.html#afe37f42a8e14b7ae5d74367612c4a15e">systick_tickint</a>&#160;</td>
          <td class="paramname"><em>tickint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configure SysTick counter with new reload value, clksource (either internal or external), and interrupt generation status. Returns error code on invalid args and 0 otherwise. </p>

</div>
</div>
<a id="a7ceb4ff889b36c96361ac5955a8ef491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ceb4ff889b36c96361ac5955a8ef491">&#9670;&nbsp;</a></span>systick_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systick_delay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uses the SysTick timer to conduct a blocking wait for <code>ms</code> milliseconds. Returns after the provided number of <code>ms</code> have elapsed. Uses a double looped structure to perform repeated 1 ms waits in a loop. </p>

</div>
</div>
<a id="a23a475a16abcc21caa11e52539be4a70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23a475a16abcc21caa11e52539be4a70">&#9670;&nbsp;</a></span>systick_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void systick_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wrapper function for disabling the SysTick timer. Only an additional call to systick_configure can re-enable the timer. </p>

</div>
</div>
<a id="aafb8d3e0fd06464b1ee0ae1edbc3c7d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafb8d3e0fd06464b1ee0ae1edbc3c7d6">&#9670;&nbsp;</a></span>SysTick_Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SysTick_Handler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handles the SysTick exception generated by the SysTick counter when the current value reaches 0. Modifies global variables relating to the number of times that the counter has reached 0. Performs scheduling (via setting PendSV to high) on every timer_wrap_comparison'th invocation of the handler (i.e. the actual scheduling does not happen until timer_wrap_around equals the timer_wrap_comparison) </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa1f72e8ab2ecd43977ec5897dae37081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1f72e8ab2ecd43977ec5897dae37081">&#9670;&nbsp;</a></span>timer_wrap_around</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> timer_wrap_around</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of times that the timer has counted from the reset value down to 0. </p>
<p>Reset this value on first syscall_multitask_start invocation to make sure it is initialized correctly.</p>
<p>Counts the number of times that the current SysTick execution has reached its reset value. </p>

</div>
</div>
<a id="a59d2573d1051d504479d8861c94e8e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59d2573d1051d504479d8861c94e8e8d">&#9670;&nbsp;</a></span>timer_wrap_comparison</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> timer_wrap_comparison</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of times that the timer needs to wrap before it can do its main functionality. </p>
<p>Set this value to something other than 1 if more than one invocation of the SysTick timer handler is needed.</p>
<p>Holds the number of times that the SysTick timer needs to wrap around before it actually handles the interrupt. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li><li class="navelem"><a class="el" href="systick_8c.html">systick.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
