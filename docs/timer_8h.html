<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded from Scratch: timer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded from Scratch
   &#160;<span id="projectnumber">Project</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('timer_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">timer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Contains constants and structs used to configure the TIMER0 peripheral.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="arm_8h_source.html">arm.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="events_8h_source.html">events.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="nvic_8h_source.html">nvic.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for timer.h:</div>
<div class="dyncontent">
<div class="center"><img src="timer_8h__incl.png" border="0" usemap="#atimer_8h" alt=""/></div>
<map name="atimer_8h" id="atimer_8h">
<area shape="rect" title="Contains constants and structs used to configure the TIMER0 peripheral." alt="" coords="95,5,163,32"/>
<area shape="rect" href="arm_8h.html" title="Macro definitions, typedefs, and aliases for common ARM functionality." alt="" coords="5,80,65,107"/>
<area shape="rect" href="events_8h.html" title="Common event paradigm used by multiple peripherals including constant to indicate starting a task and..." alt="" coords="89,80,168,107"/>
<area shape="rect" href="nvic_8h.html" title="Holds MMIO addresses for NVIC registers (and likely a NVIC struct eventually) that multiple periphera..." alt="" coords="193,80,254,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="timer_8h__dep__incl.png" border="0" usemap="#atimer_8hdep" alt=""/></div>
<map name="atimer_8hdep" id="atimer_8hdep">
<area shape="rect" title="Contains constants and structs used to configure the TIMER0 peripheral." alt="" coords="161,5,229,32"/>
<area shape="rect" href="gpiote_8c.html" title="Overrides weak GPIOTE interrupt handler with functionality for various configured GPIOTE channels." alt="" coords="5,80,80,107"/>
<area shape="rect" href="stepper_8c.html" title="Implementation of 4&#45;wire stepper motor control using timer peripheral for custom speed and bidirectio..." alt="" coords="105,80,186,107"/>
<area shape="rect" href="timer_8c.html" title="Configures timer peripheral to match desired a desired frequency and perform a custom action within t..." alt="" coords="211,80,277,107"/>
<area shape="rect" href="ultrasonic_8c.html" title="Provides functionality for creating the protocol for the HC&#45;SR04 ultrasonic range sensor." alt="" coords="302,80,399,107"/>
</map>
</div>
</div>
<p><a href="timer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad3ed2fb8c48fe4b29fda0a35bd6396c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ad3ed2fb8c48fe4b29fda0a35bd6396c5">TIMER0_BASE_ADDR</a>&#160;&#160;&#160;0x40008000</td></tr>
<tr class="memdesc:ad3ed2fb8c48fe4b29fda0a35bd6396c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base address for the TIMER0 instance of the timer peripheral (currently used by stepper motor)  <a href="timer_8h.html#ad3ed2fb8c48fe4b29fda0a35bd6396c5">More...</a><br /></td></tr>
<tr class="separator:ad3ed2fb8c48fe4b29fda0a35bd6396c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30bf84c312af248cb81bb224e09f9ba8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a30bf84c312af248cb81bb224e09f9ba8">TIMER0_IRQ</a>&#160;&#160;&#160;(8)</td></tr>
<tr class="memdesc:a30bf84c312af248cb81bb224e09f9ba8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt request number in vector table for TIMER0 (will be pended from TIMER0 when timer matches the value in a capture compare register)  <a href="timer_8h.html#a30bf84c312af248cb81bb224e09f9ba8">More...</a><br /></td></tr>
<tr class="separator:a30bf84c312af248cb81bb224e09f9ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a8fa5d19b7627b0ef9562af676c1ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a99a8fa5d19b7627b0ef9562af676c1ba">TIMER1_BASE_ADDR</a>&#160;&#160;&#160;0x40009000</td></tr>
<tr class="memdesc:a99a8fa5d19b7627b0ef9562af676c1ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base address for the TIMER1 instance of the timer peripheral (currently used by ultrasonic sensor)  <a href="timer_8h.html#a99a8fa5d19b7627b0ef9562af676c1ba">More...</a><br /></td></tr>
<tr class="separator:a99a8fa5d19b7627b0ef9562af676c1ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89d42907cd1e20d31a94b4cba7e21bb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a89d42907cd1e20d31a94b4cba7e21bb5">TIMER1_IRQ</a>&#160;&#160;&#160;(9)</td></tr>
<tr class="memdesc:a89d42907cd1e20d31a94b4cba7e21bb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt request number in vector table for TIMER1 (will be pended from TIMER1 when timeout value is found)  <a href="timer_8h.html#a89d42907cd1e20d31a94b4cba7e21bb5">More...</a><br /></td></tr>
<tr class="separator:a89d42907cd1e20d31a94b4cba7e21bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad234ad5219c0f1f8b266c9039182181e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ad234ad5219c0f1f8b266c9039182181e">TIMER_BASE_FREQUENCY</a>&#160;&#160;&#160;(16000000)</td></tr>
<tr class="memdesc:ad234ad5219c0f1f8b266c9039182181e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The base frequency of each timer peripheral is 16 MHz (which can be subdivided by setting the prescaler register)  <a href="timer_8h.html#ad234ad5219c0f1f8b266c9039182181e">More...</a><br /></td></tr>
<tr class="separator:ad234ad5219c0f1f8b266c9039182181e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a935e2e2f1a131ad0db396912ce4d3cc9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a935e2e2f1a131ad0db396912ce4d3cc9">TIMER_TASKS_START_ADDR</a>(timer_addr)&#160;&#160;&#160;(timer_addr + 0x000)</td></tr>
<tr class="memdesc:a935e2e2f1a131ad0db396912ce4d3cc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMIO address for issuing the start task (starting timer countdown)  <a href="timer_8h.html#a935e2e2f1a131ad0db396912ce4d3cc9">More...</a><br /></td></tr>
<tr class="separator:a935e2e2f1a131ad0db396912ce4d3cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b6a17cae0e4d99f31be522bdc952152"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a3b6a17cae0e4d99f31be522bdc952152">TIMER_TASKS_STOP_ADDR</a>(timer_addr)&#160;&#160;&#160;(timer_addr + 0x004)</td></tr>
<tr class="memdesc:a3b6a17cae0e4d99f31be522bdc952152"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMIO address for issuing the stop task (stopping timer countdown)  <a href="timer_8h.html#a3b6a17cae0e4d99f31be522bdc952152">More...</a><br /></td></tr>
<tr class="separator:a3b6a17cae0e4d99f31be522bdc952152"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfc57058af9b9484660d3fb312e0fdb7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#abfc57058af9b9484660d3fb312e0fdb7">TIMER_TASKS_CLEAR_ADDR</a>(timer_addr)&#160;&#160;&#160;(timer_addr + 0x00C)</td></tr>
<tr class="memdesc:abfc57058af9b9484660d3fb312e0fdb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMIO address for issuing the clear task (clearing current timer value - resetting back to 0)  <a href="timer_8h.html#abfc57058af9b9484660d3fb312e0fdb7">More...</a><br /></td></tr>
<tr class="separator:abfc57058af9b9484660d3fb312e0fdb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9058feffccd7507a796cda78dd597dc6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a9058feffccd7507a796cda78dd597dc6">TIMER_TASKS_CAPTURE_ADDR</a>(timer_addr,  cc)&#160;&#160;&#160;(timer_addr + 0x040 + 4*cc)</td></tr>
<tr class="memdesc:a9058feffccd7507a796cda78dd597dc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMIO address for issuing capture task (loading current value of timer at instant of trigger into cc register)  <a href="timer_8h.html#a9058feffccd7507a796cda78dd597dc6">More...</a><br /></td></tr>
<tr class="separator:a9058feffccd7507a796cda78dd597dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73759bcae8d0ffeef4d5503a6f9a2213"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a73759bcae8d0ffeef4d5503a6f9a2213">TIMER_EVENTS_COMPARE_ADDR</a>(timer_addr,  cc)&#160;&#160;&#160;(timer_addr + 0x140 + 4*cc)</td></tr>
<tr class="memdesc:a73759bcae8d0ffeef4d5503a6f9a2213"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event register for when the current timer value matches the value in CC[i] (arguement cc must be of type timer_cc)  <a href="timer_8h.html#a73759bcae8d0ffeef4d5503a6f9a2213">More...</a><br /></td></tr>
<tr class="separator:a73759bcae8d0ffeef4d5503a6f9a2213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1871a0b827629f0182ed9530cda4a5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#aa1871a0b827629f0182ed9530cda4a5a">TIMER_INTENSET_ADDR</a>(timer_addr)&#160;&#160;&#160;(timer_addr + 0x304)</td></tr>
<tr class="memdesc:aa1871a0b827629f0182ed9530cda4a5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows enabling the generation of interrupts for when values in timer and CC[i] are equal.  <a href="timer_8h.html#aa1871a0b827629f0182ed9530cda4a5a">More...</a><br /></td></tr>
<tr class="separator:aa1871a0b827629f0182ed9530cda4a5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adefa31fc9215b03e09877fe229985279"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#adefa31fc9215b03e09877fe229985279">TIMER_INTENSET_INDEX_OFFSET</a>&#160;&#160;&#160;(16)</td></tr>
<tr class="memdesc:adefa31fc9215b03e09877fe229985279"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of open right-aligned indices in the intenset register before bits start to enable interrupts.  <a href="timer_8h.html#adefa31fc9215b03e09877fe229985279">More...</a><br /></td></tr>
<tr class="separator:adefa31fc9215b03e09877fe229985279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1afba2a35b2ac431d9e55167f41836f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a1afba2a35b2ac431d9e55167f41836f9">TIMER_PRESCALER_ADDR</a>(timer_addr)&#160;&#160;&#160;(timer_addr + 0x510)</td></tr>
<tr class="memdesc:a1afba2a35b2ac431d9e55167f41836f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the prescalar for the 16 MHz to be used in the timer (valid values are 0-9 with the timer being divided by 2^prescaler)  <a href="timer_8h.html#a1afba2a35b2ac431d9e55167f41836f9">More...</a><br /></td></tr>
<tr class="separator:a1afba2a35b2ac431d9e55167f41836f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac210970e91820e5e283ea11aa1bd4375"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ac210970e91820e5e283ea11aa1bd4375">TIMER_CC_ADDR</a>(timer_addr,  cc)&#160;&#160;&#160;(timer_addr + 0x540 + 4*cc)</td></tr>
<tr class="memdesc:ac210970e91820e5e283ea11aa1bd4375"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capture compare register MMIO address where compare values are loaded (must be of type timer_cc - only the numbers of bits in the BITMODE register will be used with a default of 16)  <a href="timer_8h.html#ac210970e91820e5e283ea11aa1bd4375">More...</a><br /></td></tr>
<tr class="separator:ac210970e91820e5e283ea11aa1bd4375"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af18827ee68a2d6e3bd6840589144e9f9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9">timer_cc</a> { <a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9ab61a20b001910a69d13a43db87c01daf">CC0</a>
, <a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9ae8a9ed8cc68662182ac3717e34f8404f">CC1</a>
, <a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9aa8511a0643f5f4f0ad954387595f99e3">CC2</a>
, <a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9a2d96bc4e698089023040e454c3adee6f">CC3</a>
 }</td></tr>
<tr class="separator:af18827ee68a2d6e3bd6840589144e9f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac1e494b9eff92a9b78c20e22bbf3d6d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ac1e494b9eff92a9b78c20e22bbf3d6d7">timer0_init</a> (int freq)</td></tr>
<tr class="separator:ac1e494b9eff92a9b78c20e22bbf3d6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ec887e79d91372664e4bb3fbf69162"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ad7ec887e79d91372664e4bb3fbf69162">timer0_start</a> ()</td></tr>
<tr class="separator:ad7ec887e79d91372664e4bb3fbf69162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7431d3fbc014f4481d7557e9e72de42a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a7431d3fbc014f4481d7557e9e72de42a">timer0_stop</a> ()</td></tr>
<tr class="separator:a7431d3fbc014f4481d7557e9e72de42a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb302081b7dbd40d0fea4bbe53fd9b7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#abb302081b7dbd40d0fea4bbe53fd9b7b">timer1_init</a> ()</td></tr>
<tr class="separator:abb302081b7dbd40d0fea4bbe53fd9b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93bf7d228be40a43afa04399e43bc8c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a93bf7d228be40a43afa04399e43bc8c7">timer1_start</a> ()</td></tr>
<tr class="separator:a93bf7d228be40a43afa04399e43bc8c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8148e6dd819794fd8a7d22f49796c11f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a8148e6dd819794fd8a7d22f49796c11f">timer1_stop</a> ()</td></tr>
<tr class="separator:a8148e6dd819794fd8a7d22f49796c11f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a63a47319af084d58af59d008a83f434e"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a63a47319af084d58af59d008a83f434e">timer0_num_interrupts_after_start</a></td></tr>
<tr class="memdesc:a63a47319af084d58af59d008a83f434e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies the number of interrupts that should be handled by the TIMER0 handler after a start task is issued.  <a href="timer_8h.html#a63a47319af084d58af59d008a83f434e">More...</a><br /></td></tr>
<tr class="separator:a63a47319af084d58af59d008a83f434e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16036239635aa35de4df7e8c84001727"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a16036239635aa35de4df7e8c84001727">timer0_num_interrupts_already_handled</a></td></tr>
<tr class="memdesc:a16036239635aa35de4df7e8c84001727"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifies the number of interrupts that have already been handled since the last start task was issued for TIMER0.  <a href="timer_8h.html#a16036239635aa35de4df7e8c84001727">More...</a><br /></td></tr>
<tr class="separator:a16036239635aa35de4df7e8c84001727"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Contains constants and structs used to configure the TIMER0 peripheral. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad3ed2fb8c48fe4b29fda0a35bd6396c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3ed2fb8c48fe4b29fda0a35bd6396c5">&#9670;&nbsp;</a></span>TIMER0_BASE_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER0_BASE_ADDR&#160;&#160;&#160;0x40008000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Base address for the TIMER0 instance of the timer peripheral (currently used by stepper motor) </p>

</div>
</div>
<a id="a30bf84c312af248cb81bb224e09f9ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30bf84c312af248cb81bb224e09f9ba8">&#9670;&nbsp;</a></span>TIMER0_IRQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER0_IRQ&#160;&#160;&#160;(8)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt request number in vector table for TIMER0 (will be pended from TIMER0 when timer matches the value in a capture compare register) </p>

</div>
</div>
<a id="a99a8fa5d19b7627b0ef9562af676c1ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99a8fa5d19b7627b0ef9562af676c1ba">&#9670;&nbsp;</a></span>TIMER1_BASE_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER1_BASE_ADDR&#160;&#160;&#160;0x40009000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Base address for the TIMER1 instance of the timer peripheral (currently used by ultrasonic sensor) </p>

</div>
</div>
<a id="a89d42907cd1e20d31a94b4cba7e21bb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89d42907cd1e20d31a94b4cba7e21bb5">&#9670;&nbsp;</a></span>TIMER1_IRQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER1_IRQ&#160;&#160;&#160;(9)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt request number in vector table for TIMER1 (will be pended from TIMER1 when timeout value is found) </p>

</div>
</div>
<a id="ad234ad5219c0f1f8b266c9039182181e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad234ad5219c0f1f8b266c9039182181e">&#9670;&nbsp;</a></span>TIMER_BASE_FREQUENCY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_BASE_FREQUENCY&#160;&#160;&#160;(16000000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The base frequency of each timer peripheral is 16 MHz (which can be subdivided by setting the prescaler register) </p>

</div>
</div>
<a id="ac210970e91820e5e283ea11aa1bd4375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac210970e91820e5e283ea11aa1bd4375">&#9670;&nbsp;</a></span>TIMER_CC_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_CC_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cc&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(timer_addr + 0x540 + 4*cc)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capture compare register MMIO address where compare values are loaded (must be of type timer_cc - only the numbers of bits in the BITMODE register will be used with a default of 16) </p>

</div>
</div>
<a id="a73759bcae8d0ffeef4d5503a6f9a2213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73759bcae8d0ffeef4d5503a6f9a2213">&#9670;&nbsp;</a></span>TIMER_EVENTS_COMPARE_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_EVENTS_COMPARE_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cc&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(timer_addr + 0x140 + 4*cc)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Event register for when the current timer value matches the value in CC[i] (arguement cc must be of type timer_cc) </p>

</div>
</div>
<a id="aa1871a0b827629f0182ed9530cda4a5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1871a0b827629f0182ed9530cda4a5a">&#9670;&nbsp;</a></span>TIMER_INTENSET_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_INTENSET_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr</td><td>)</td>
          <td>&#160;&#160;&#160;(timer_addr + 0x304)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows enabling the generation of interrupts for when values in timer and CC[i] are equal. </p>

</div>
</div>
<a id="adefa31fc9215b03e09877fe229985279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adefa31fc9215b03e09877fe229985279">&#9670;&nbsp;</a></span>TIMER_INTENSET_INDEX_OFFSET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_INTENSET_INDEX_OFFSET&#160;&#160;&#160;(16)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of open right-aligned indices in the intenset register before bits start to enable interrupts. </p>

</div>
</div>
<a id="a1afba2a35b2ac431d9e55167f41836f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1afba2a35b2ac431d9e55167f41836f9">&#9670;&nbsp;</a></span>TIMER_PRESCALER_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_PRESCALER_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr</td><td>)</td>
          <td>&#160;&#160;&#160;(timer_addr + 0x510)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the prescalar for the 16 MHz to be used in the timer (valid values are 0-9 with the timer being divided by 2^prescaler) </p>

</div>
</div>
<a id="a9058feffccd7507a796cda78dd597dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9058feffccd7507a796cda78dd597dc6">&#9670;&nbsp;</a></span>TIMER_TASKS_CAPTURE_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_TASKS_CAPTURE_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">cc&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(timer_addr + 0x040 + 4*cc)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMIO address for issuing capture task (loading current value of timer at instant of trigger into cc register) </p>

</div>
</div>
<a id="abfc57058af9b9484660d3fb312e0fdb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfc57058af9b9484660d3fb312e0fdb7">&#9670;&nbsp;</a></span>TIMER_TASKS_CLEAR_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_TASKS_CLEAR_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr</td><td>)</td>
          <td>&#160;&#160;&#160;(timer_addr + 0x00C)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMIO address for issuing the clear task (clearing current timer value - resetting back to 0) </p>

</div>
</div>
<a id="a935e2e2f1a131ad0db396912ce4d3cc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a935e2e2f1a131ad0db396912ce4d3cc9">&#9670;&nbsp;</a></span>TIMER_TASKS_START_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_TASKS_START_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr</td><td>)</td>
          <td>&#160;&#160;&#160;(timer_addr + 0x000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMIO address for issuing the start task (starting timer countdown) </p>

</div>
</div>
<a id="a3b6a17cae0e4d99f31be522bdc952152"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b6a17cae0e4d99f31be522bdc952152">&#9670;&nbsp;</a></span>TIMER_TASKS_STOP_ADDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_TASKS_STOP_ADDR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timer_addr</td><td>)</td>
          <td>&#160;&#160;&#160;(timer_addr + 0x004)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MMIO address for issuing the stop task (stopping timer countdown) </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af18827ee68a2d6e3bd6840589144e9f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af18827ee68a2d6e3bd6840589144e9f9">&#9670;&nbsp;</a></span>timer_cc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="timer_8h.html#af18827ee68a2d6e3bd6840589144e9f9">timer_cc</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Capture compare registers available to each instance of the timer peripheral. TIMER3 and TIMER4 have two addition CC registers but all instances have at least these 4. Will be used as arguement type when indexing into groups of CC registers (using macros). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af18827ee68a2d6e3bd6840589144e9f9ab61a20b001910a69d13a43db87c01daf"></a>CC0&#160;</td><td class="fielddoc"><p>Capture compare register 0. </p>
</td></tr>
<tr><td class="fieldname"><a id="af18827ee68a2d6e3bd6840589144e9f9ae8a9ed8cc68662182ac3717e34f8404f"></a>CC1&#160;</td><td class="fielddoc"><p>Capture compare register 1. </p>
</td></tr>
<tr><td class="fieldname"><a id="af18827ee68a2d6e3bd6840589144e9f9aa8511a0643f5f4f0ad954387595f99e3"></a>CC2&#160;</td><td class="fielddoc"><p>Capture compare register 2. </p>
</td></tr>
<tr><td class="fieldname"><a id="af18827ee68a2d6e3bd6840589144e9f9a2d96bc4e698089023040e454c3adee6f"></a>CC3&#160;</td><td class="fielddoc"><p>Capture compare register 3. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac1e494b9eff92a9b78c20e22bbf3d6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1e494b9eff92a9b78c20e22bbf3d6d7">&#9670;&nbsp;</a></span>timer0_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer0_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>freq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the used TIMER0 peripheral with appropriate prescaling values and prepares it to start generating interrupts for the stepper control signals. CC[0] is used to hold the comparison value associated with the <code>freq</code> of event occurence. When the timer value is equal to the comparison value, a TIMER0 interrupt is configured to be generated (with the NVIC being configured to listen for it).</p>
<p>Configures the TIMER0 peripheral to begin firing interrupts at a rate <code>freq</code>. The comparison value for a 1 MHz timer (16 MHz default after subdividing) is calculated and loaded into CC0. Interrupts for the COMPARE[0] event are enabled, and the NVIC is configured to listen for interrupts originating from TIMER0. Finally, the counter is started (begins counting down) at the end of the function call. </p>

</div>
</div>
<a id="ad7ec887e79d91372664e4bb3fbf69162"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ec887e79d91372664e4bb3fbf69162">&#9670;&nbsp;</a></span>timer0_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer0_start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Starts the timer to begin counting and triggering interrupts according to the <code>freq</code> last specified in an initialization call. The timer will continue until a call to timer_stop is made.</p>
<p>Triggers timer to begin handling its own interrupts at the specified frequency (i.e. start to increment the counter value in timer mode). This can be used in default mode (without calling init) but behavior is undefined. </p>

</div>
</div>
<a id="a7431d3fbc014f4481d7557e9e72de42a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7431d3fbc014f4481d7557e9e72de42a">&#9670;&nbsp;</a></span>timer0_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer0_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stops the timer from increasing its internal counter but does not reset the configuration values specified in the last call to <code>timer_init</code>.</p>
<p>Trigger timer to stop incrementing its own internal counter (but keeps the same configurations specified in timer_init). This can be used in default mode (without calling init) but behavior is undefined. </p>

</div>
</div>
<a id="abb302081b7dbd40d0fea4bbe53fd9b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb302081b7dbd40d0fea4bbe53fd9b7b">&#9670;&nbsp;</a></span>timer1_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer1_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configures the TIMER1 peripheral for use in tracking the delay between a source ultrasonic pulse and the detection of that pulse on return. This timer will begin counting until 36ms timeout point is reached (after which no object is assumed to be detected). The timer will simply count until a detection is made by the GPIOTE channel (after which the current value of the timer will be captured and assessed for time elapsed).</p>
<p>Configures the TIMER1 peripheral to be prepared to start counting at 1 MHz. Only generates an interrupt if the maximum value is reached (stored in CC[0]). If GPIOTE has falling edge before maximum value, this value is placed in CC[1] </p>

</div>
</div>
<a id="a93bf7d228be40a43afa04399e43bc8c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93bf7d228be40a43afa04399e43bc8c7">&#9670;&nbsp;</a></span>timer1_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer1_start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invoke TIMER1 peripheral to begin counting up.</p>
<p>Triggers timer1 to begin counting upwards until max value is hit or GPIOTE handler is invoked. </p>

</div>
</div>
<a id="a8148e6dd819794fd8a7d22f49796c11f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8148e6dd819794fd8a7d22f49796c11f">&#9670;&nbsp;</a></span>timer1_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer1_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Immediately stop TIMER1 from counting futher.</p>
<p>Trigger timer1 to stop incrementing its own internal counter (but keeps the same configurations specified in timer_init). </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a63a47319af084d58af59d008a83f434e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63a47319af084d58af59d008a83f434e">&#9670;&nbsp;</a></span>timer0_num_interrupts_after_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> timer0_num_interrupts_after_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specifies the number of interrupts that should be handled by the TIMER0 handler after a start task is issued. </p>

</div>
</div>
<a id="a16036239635aa35de4df7e8c84001727"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16036239635aa35de4df7e8c84001727">&#9670;&nbsp;</a></span>timer0_num_interrupts_already_handled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> timer0_num_interrupts_already_handled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specifies the number of interrupts that have already been handled since the last start task was issued for TIMER0. </p>
<p>Specifies the number of interrupts that have already been handled since the last start task was issued for TIMER0. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_009f605b833ac4622acd6c3c0c26c0f0.html">include</a></li><li class="navelem"><a class="el" href="timer_8h.html">timer.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
