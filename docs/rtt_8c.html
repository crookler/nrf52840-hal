<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embedded from Scratch: rtt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embedded from Scratch
   &#160;<span id="projectnumber">Project</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('rtt_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">rtt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of RTT protocol for debugger.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rtt_8h_source.html">rtt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="arm_8h_source.html">arm.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for rtt.c:</div>
<div class="dyncontent">
<div class="center"><img src="rtt_8c__incl.png" border="0" usemap="#artt_8c" alt=""/></div>
<map name="artt_8c" id="artt_8c">
<area shape="rect" title="Implementation of RTT protocol for debugger." alt="" coords="37,5,85,32"/>
<area shape="rect" href="rtt_8h.html" title="Function prototpyes and struct definitions for writing/reading to the up and down buffer of the debug..." alt="" coords="5,80,55,107"/>
<area shape="rect" href="arm_8h.html" title="Macro definitions, typedefs, and aliases for common ARM functionality." alt="" coords="31,155,91,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8f16b765d1a3baafc042e71de26922f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt_8c.html#a8f16b765d1a3baafc042e71de26922f4">rtt_init</a> ()</td></tr>
<tr class="separator:a8f16b765d1a3baafc042e71de26922f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ed917d3bb01e26d256611fb79de491f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt_8c.html#a6ed917d3bb01e26d256611fb79de491f">rtt_write</a> (const char *src, <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> len)</td></tr>
<tr class="separator:a6ed917d3bb01e26d256611fb79de491f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad68ca09006effcdb5b85b5277950b9b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt_8c.html#ad68ca09006effcdb5b85b5277950b9b0">rtt_read</a> (char *dst, <a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> len)</td></tr>
<tr class="separator:ad68ca09006effcdb5b85b5277950b9b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca654fa6a4a109fb78ea66e937cf3ac8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt_8c.html#aca654fa6a4a109fb78ea66e937cf3ac8">rtt_peek</a> ()</td></tr>
<tr class="separator:aca654fa6a4a109fb78ea66e937cf3ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2f5cdba3b7fc86878ca63214db15b05e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrtt__control__block.html">rtt_control_block</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rtt_8c.html#a2f5cdba3b7fc86878ca63214db15b05e">__rtt_start</a></td></tr>
<tr class="separator:a2f5cdba3b7fc86878ca63214db15b05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of RTT protocol for debugger. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8f16b765d1a3baafc042e71de26922f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f16b765d1a3baafc042e71de26922f4">&#9670;&nbsp;</a></span>rtt_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rtt_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maps the allocated rtt_buffer block created during linking into the format of a <a class="el" href="structrtt__control__block.html">rtt_control_block</a> struct. Initializes values for the read and write indices and flags of the up and down buffers. Sets an identifier value so the debugger can immediately recognize this section of memory as the <a class="el" href="structrtt__control__block.html">rtt_control_block</a>. </p>

</div>
</div>
<a id="aca654fa6a4a109fb78ea66e937cf3ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca654fa6a4a109fb78ea66e937cf3ac8">&#9670;&nbsp;</a></span>rtt_peek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> rtt_peek </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Computes the wrapping difference between the write_index and the read_index in the down_buffer. This difference is the number of indices that can be safely consumed without reading junk. Returns the number of indices that read_index lags behind write_index. </p>

</div>
</div>
<a id="ad68ca09006effcdb5b85b5277950b9b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad68ca09006effcdb5b85b5277950b9b0">&#9670;&nbsp;</a></span>rtt_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> rtt_read </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Populates the <code>dst</code> buffer with content from the down_buffer in the rtt_control block. The debugger is responsible for writing bytes to this buffer, and any time w_idx &gt; r_idx (wrapping), the controller can read values without fear of reading junk. All data has been consumed if w_idx = r_idx, but the controller cannot read data at w_idx = r_idx because it may be junk (i.e. not yet updated since this is also the starting condition). Returns the number of bytes copied from down_buffer to dst. </p>

</div>
</div>
<a id="a6ed917d3bb01e26d256611fb79de491f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ed917d3bb01e26d256611fb79de491f">&#9670;&nbsp;</a></span>rtt_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> rtt_write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="arm_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Populates the up_buffer by copying <code>len</code> bytes from the character array <code>src</code> (for consumption by debugger). This implementation is blocking (will wait for the debugger to read all written bytes before overwriting any bytes the debugger has not yet written). Returns the number of bytes written to up_buffer (should equal len). Idea is to reserve w_idx = r_idx as identifier for empty and set w_idx = r_idx -1 as condition for full to avoid full/empty ambiguity issue. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2f5cdba3b7fc86878ca63214db15b05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f5cdba3b7fc86878ca63214db15b05e">&#9670;&nbsp;</a></span>__rtt_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrtt__control__block.html">rtt_control_block</a> __rtt_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li><li class="navelem"><a class="el" href="rtt_8c.html">rtt.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
